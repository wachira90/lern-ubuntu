# ubuntu-20.04-vlan

## install vlan

````
sudo apt install vlan -y
````

## mod vlan 8021q

````
modprobe --first-time 8021q
````

## show info

````
modinfo 8021q
````

## result

````
root@ubuntu:~# modinfo 8021q
filename:       /lib/modules/5.11.0-36-generic/kernel/net/8021q/8021q.ko
version:        1.8
license:        GPL
alias:          rtnl-link-vlan
srcversion:     4DC720ECF732ECC695B9099
depends:        mrp,garp
retpoline:      Y
intree:         Y
name:           8021q
vermagic:       5.11.0-36-generic SMP mod_unload modversions 
sig_id:         PKCS#7
signer:         Build time autogenerated kernel key
sig_key:        5F:F6:6F:23:86:35:AB:B9:29:CC:24:05:2D:F8:3F:30:B4:4E:49:3D
sig_hashalgo:   sha512
signature:      44:B6:6A:63:55:DF:57:DE:BB:98:54:5C:A6:77:A3:73:4C:DE:22:10:
        64:47:2F:68:54:69:F7:E2:F2:2A:B7:60:EC:C8:9C:60:23:6E:C2:80:
        6D:53:12:9D:EE:B6:4B:71:09:67:81:B4:55:9B:A2:A9:FE:7D:CC:41:
        4B:5C:34:70:B5:35:CD:FD:14:C5:D7:02:63:A5:29:B8:23:B3:B9:D8:
        BE:4C:76:8A:B9:38:92:8F:BD:5D:3D:8C:87:92:A0:F5:15:C0:DD:99:
        46:0D:9C:FE:4B:33:0D:7C:6F:B6:8F:2F:C6:C6:29:A7:20:75:36:0A:
        DA:E6:50:E1:28:74:CF:C3:F7:9F:37:DE:96:CD:54:0C:9F:A4:6A:7F:
        05:15:FE:57:E4:61:EE:8E:52:9C:13:2F:FF:03:60:A2:CB:47:49:31:
        A7:31:CC:F3:5C:EF:FA:61:BA:21:C7:E4:F3:B9:89:53:2E:DE:73:A8:
        A7:63:09:6E:1F:11:BA:D6:06:0A:04:0F:5A:DF:12:D0:17:01:97:F0:
        25:04:BC:EA:81:EE:B3:77:EE:87:55:19:0B:F1:58:19:F4:38:49:29:
        D5:4F:14:A9:8D:40:4C:8B:ED:52:FE:65:B7:7E:CB:01:54:23:66:DC:
        81:7B:47:F6:97:31:FB:36:B4:91:C8:00:98:77:E6:C6:85:E9:AB:A5:
        75:8D:02:A9:EB:BC:97:C2:8A:75:63:2F:82:BE:EB:21:C2:DE:2D:7D:
        D2:2C:7F:26:E7:0B:BF:4A:80:D9:47:0D:EA:77:DA:BA:90:77:B9:AE:
        64:2B:E9:3A:51:4F:50:88:94:AA:33:F2:00:02:83:BF:45:51:46:B0:
        D7:CA:6C:EB:47:47:CE:67:B5:AC:26:E6:CB:18:34:7B:38:64:59:C0:
        25:67:66:B7:C0:EA:40:42:00:0D:6A:1B:49:88:8E:D3:13:04:EF:BE:
        9A:11:E4:C2:4A:92:A8:BC:F9:4F:0C:53:14:55:7B:DA:30:74:FC:4B:
        37:8A:0B:87:13:95:55:97:C9:60:FE:24:25:DF:E0:16:84:88:BA:0F:
        9C:4E:1E:46:E4:E2:4E:DF:11:1D:81:90:68:D6:CE:BF:D9:26:E5:54:
        AF:C3:60:6B:92:48:71:AC:69:6D:5F:E7:F2:21:57:D0:4F:0A:5E:2C:
        9F:F8:DC:7B:75:DE:C0:F6:B5:91:8F:6A:A8:B1:41:8D:41:27:CD:20:
        E9:2C:37:33:CD:E0:CE:92:19:D0:5E:69:E1:1B:25:29:E0:F7:CB:6B:
        A8:91:CA:4E:47:97:B7:58:CE:63:24:F0:2E:D7:31:9A:F2:BF:50:FD:
        86:0B:75:78:0A:E9:62:1A:37:9F:70:2E
root@ubuntu:~#
````

## nano /etc/netplan/01-network-manager-all.yaml

````
# UBUNTU 20.04 OK TEST
network:
  version: 2
  renderer: NetworkManager
  ethernets:
    ens160:
      dhcp4: yes
      dhcp6: no
    ens192:
      dhcp4: no
      dhcp6: no
      addresses: [192.168.4.253/24]

  vlans:
    ens192.2:
      id: 2
      link: ens192
      addresses: [10.10.10.1/24]

    ens192.3:
      id: 3
      link: ens192
      addresses: [10.10.90.1/24]

    ens192.4:
      id: 4
      link: ens192
      addresses: [10.10.140.1/24]

    ens192.5:
      id: 5
      link: ens192
      addresses: [10.10.180.1/24]

    ens192.6:
      id: 6
      link: ens192
      addresses: [10.10.50.1/24]

    ens192.10:
      id: 10
      link: ens192
      addresses: [192.168.2.1/24]

    ens192.11:
      id: 11
      link: ens192
      addresses: [10.10.60.254/24]

    ens192.18:
      id: 18
      link: ens192
      addresses: [10.10.8.1/24]

    ens192.21:
      id: 21
      link: ens192
      addresses: [10.10.20.1/24]
````

## apply config

````
netplan apply
````
